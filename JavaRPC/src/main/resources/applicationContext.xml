<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
	xmlns:tx="http://www.springframework.org/schema/tx" xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="
            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
            http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd  
            http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd 
            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">
    
    <bean id="CService" class="project.lanshan.javarpc.consumer.netty.NettyConsumer">
   		<property name="serviceName" value="getWords"/>
   		<property name="serviceClass" value="project.lanshan.javarpc.firsttest.ProviderAction"/>
   		<property name="host" value="127.0.0.1"/>
   		<property name="port" value="3789"/>
    </bean>
    
   
    <!-- MethodInterceptor -->
    <bean id="targetService" class="project.lanshan.javarpc.firsttest.ConsumerAction"/>
    <bean id="methodInterceptor" class="project.lanshan.javarpc.consumer.interceptor.ActualMethod"/>
    <bean id="proxy" class="org.springframework.aop.framework.ProxyFactoryBean">
   		<property name="target" ref="targetService"/>
   		<property name="proxyInterfaces">  
            <value>project.lanshan.javarpc.firsttest.Action</value>  
        </property>  
   		<property name="interceptorNames">
   			<list>
   				<value>methodInterceptor</value>
   			</list>
   		</property> 
    </bean>
    
     <!-- consumer -->
    <bean id="consumerCaller" class="project.lanshan.javarpc.consumer.caller.DefaultCaller">
   		<property name="consumer" ref="CService"/>
    </bean>
    <bean id="springConsumerBean" class="project.lanshan.javarpc.consumer.SpringConsumerBean">
   		<property name="consumerCaller"  ref="consumerCaller"/>
    </bean>
    
    <!-- provider -->
    <bean id="PService" class="project.lanshan.javarpc.provider.netty.NettyProvider">
   		 <property name="serviceName" value="getWords"/>
   		<property name="serviceClass" value="project.lanshan.javarpc.firsttest.ProviderAction"/>
   		<property name="host" value="127.0.0.1"/>
   		<property name="port" value="3789"/>
    </bean>
    <bean id="providerPublisher" class="project.lanshan.javarpc.provider.publisher.DefaultPublisher">
   		<property name="provider" ref="PService"/>
    </bean>
    <bean id="springProviderBean" class="project.lanshan.javarpc.provider.SpringProviderBean">
    	<property name="providerPublisher" ref="providerPublisher"/>
    </bean>
</beans>